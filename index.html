<!doctype html>
<body>
<button onclick="info()" class="first">
  find
</button>
<button onclick="send()" class="second">
  send
</button>
<input class="first" id="url">
<img>
<h1></h1>
<label class="second">content </label><input id="content" class="second" placeholder="@everyone">
<label class="second">username </label><input id="user" class="second">
<label class="second">avatar </label><input id="avatar" class="second" placeholder="URL">
<input type="file" class="second" multible>
<button class="second" onclick="del()">DELETE</button>
<button onclick="clearfiles()" class="second">clear file</button>
<style>
  img {border-radius:70px; transition:200ms}
  img:hover {border-radius:5px; transition:250ms}
  img:active {filter: blur(0.5px)}
</style>
</body>
<script>
    const web = document.body.querySelector("#url").value
  const defic = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAZlBMVEXrRZ/sUKXxf73zl8nyi8Pwc7f5xOH96PP////+8/ntXKv86PP2rdX60Of1os/vZ7H+9Pn3udvuaLHzi8P73O32rtX0lsnzlsnwdLf95/P4xOH4xeH4udvsUaXxgL383O3yisPvaLFF0RjvAAAET0lEQVR4AezBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAIDZuc/FVnUYDuBiJbLBKs5ooLvv/5B3X3UTdJzAP4f8PldtLTxkM47K8qKk0fKiyn6jtlfFas3MbnSbfM3M9aqofofGN4H/JzSSaEhoLjkJN0VgZegCvuX3QnFDF6hq1qxsXSDyZ3WsLq31LStLF9AZ4JJzsJGWfyC2GeCTuvEEL9NxP9AF/E2+LaSJSqTYVpWnf9T8s1ASNC8tD4pN3A38SBtWEnlQHT2hqgJPYlURpD1PZk+ASp5QRXB8zROqM0ITWS1yEGxYLXMQ1DyxmqAIT04IiOfpOb/QGVAFgpHzLKqFzoBqh1MDzuSWIGQ1z8RlC10ClSxvEwDYBSLPSJZZA0F1gcizkmV3AIAuEHlmstwlAKILHHh2ssRdAEwXKBnALc1nxwACzaZjCNVC10C1WmYRBDANlgxCljgFAkyDG4ZRLXQKVM1Cq0DlllcEAIyByECahY4A5ZY2AgDGwJ6hNNBVkFuHnWMDe0iNuw8IB09/25S9PWR8mj3oPqDv3gf15pC8Bz0WueNRmuzTzGEPEcw9sfvFbZqkh0AshBtr+5WcOETd4B2H39N37u0b2wegScAwBfSevvPo+Gf2EBXh6mCh70lCCEol4C3P8Rmu50AIViXwlNQl9wkhA3KajiT9P11iCMB2IPBxGf3k0d6JH8FKIcdHPdPP1vZaZg01Cz4mHlWHhJABGdRhyOq0CYhQteCWj4upCbBXXiVNRTCHQANVCNdDM5o9ZAdVDO84fRm0hRCP8Ix1GFBZ5lBDCMCRwGPiOW1MCgFYBzeJjy3UCSEQ26Eu7bGFMi0E4O7IE6d0gaw2h5CGYBQCh6T3e/f2EGGsBEjKI4yH1JABAndb8IU+e7GHVHA3CCOPJvaLaQ9RES8BHD2R8vcJIUAJCGwRq+GvK6WHqBVWAlQbYoyr9mwhKsyQABzXBFwTcE3ANQHXBFwTcE3ANQETiAwqXhOwhMeEAc4DhEHJDGeCUG6Bbg5zOPR8Mv1hB3Moanhgp7vnkwjdyHFXodwZ0qNNLz0ncpLpwIN5QqJ0fEStvbGLCTlwsdO/2fIR7pYm43c8PgX2HGjrM8M3m4OnKQlbUkCdBDbZNR2pKjDM5Ve+t6WAsk6C4xFcaJ4yMjR/4suvxI1Jgaf3Nk9N2PGP1vfNdkPvZdIy2uVXPhoO+d/bdFtpYgi79b9CiFG2Tz6jT6r7lkEvv+EtqHDejXef05yEj3o9U8mlZYLCHAfxnGcv0dP8fDjfgzubYzUyhq4/2x59j918VQbDm1MWjw68+aoLA7uiBAfA5humw3iWM+hVR5h87E//BXjv0BY+w2Rwe/ITuJBnpOC7QTjxjRgnr4RPDwB0BTjNIHC6Qb6YHLzQibz83fqMLs0G8lf92R4cyAAAAAAM8re+x1cBAAAAAAAAAAAAAAAAAAAAAKwEXiSjy96AYeIAAAAASUVORK5CYII=`
  function donothing(){
  //does nothing XD  
    //this function will prob not be used but its here for the shits and the giggles
  }
  function clearfiles(){
  document.querySelector('input[type=file]').value = null
  }
async function info(){
  try{const res = await fetch(web)
  if(!res.ok){
    throw new Error(`${res.status} not a valid url`)
    return;
  }
const json = await res.json()  
  document.querySelector("h1").innerText = json.name
      name = json.name
       def = () => {document.querySelector("img").src = defic; document.querySelector("img").style.width = '128px'; def = null}
      json.avatar === null? def() : document.querySelector("img").src = `https://cdn.discordapp.com/avatars/${json.id}/${json.avatar}.webp?size=128`
for(var i = 0; i < document.querySelectorAll(".first").length; i++){document.querySelectorAll(".first")[i].style.display = 'none'}
for(var i = 0; i < document.querySelectorAll(".second").length; i++){document.querySelectorAll(".second")[i].style.display = 'block'}
     }
  catch(er){
    window.alert(`Error: ${er.message}`)
  }
}
 async function del(){
 try{
 const res = await fetch(web, {method:'DELETE'})
 console.log(res.status)
 window.alert("DELETED!!!")
 window.location.reload()
 if(!res.ok){
 throw new Error(res.status)
 }
 }
 catch(er){
 console.error(`Error: ${er.message}`)
 }
 } 
  

  
  async function send(){
    const msg = new FormData()
    msg.append('content', null)
    msg.append('username', null)
    msg.append('avatar_url', null)
    msg.append('file', null)
    document.querySelector("#content").value === null || document.querySelector("#content").value == ''? msg.delete('content') :msg.set('content', document.querySelector("#content").value)
     document.querySelector("#user").value === null || document.querySelector("#user").value == ''? msg.set('username', name) : msg.set('username', document.querySelector("#user").value)
    document.querySelector("#avatar").value === null || document.querySelector("#avatar").value == ''? msg.delete('avatar_url') : msg.set('avatar_url', document.querySelector("#avatar").value)
document.querySelector('input[type=file]').value == ""? msg.delete('file') : msg.set('file', document.querySelector('input[type=file]').files[0])

    try{const res = await fetch(web)
  if(!res.ok){
    throw new Error(`${res.status}`)
  }
const xhr = new XMLHttpRequest()
xhr.open("POST", web)
xhr.send(msg)
    console.log(res.status)    
  }
  catch(er){
    console.error(`Error: ${er.message}`)
  }
  }
  window.onload = () => {for(var i = 0; i < document.querySelectorAll(".second").length; i++){document.querySelectorAll(".second")[i].style.display = 'none'}; document.querySelector("#user").placeholder = `${name}`}
</script>
